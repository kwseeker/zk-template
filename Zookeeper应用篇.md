## Zookeeper应用篇

#### 1 Zookeeper应用场景

+ **数据发布/订阅（配置中心）**

+ **负载均衡**

+ **命名服务（服务发现与注册）**

+ **集群管理和监控**

+ **Master选举**

  

+ **分布式锁**

  实现方式：

  1）利用临时顺序节点和Watcher节点监听。客户端（工作线程）等待前一个节点的删除事件（工作线程wait(), 事件发生后通过事件处理器notify()工作线程）。
  
  2）利用同一个临时节点多个客户端同时创建只能有一个成功的特性。每个工作线程循环去尝试创建，创建失败就yield(),然后去尝试下一次的创建（借鉴FutureTask实现原理）。

+ **分布式队列**



#### 2 ZK实现配置中心



#### 3 ZK实现负载均衡



#### 4 ZK实现命名服务

实现原理：

ZK服务端作为注册中心，服务提供方和服务调用方均作为ZK的客户端；

服务提供方向ZK服务端注册文件临时节点代表自己提供的服务（包含服务名，IP端口，接口列表等信息）；

服务调用方需要调用某个服务时去注册中心查找服务列表，获取服务IP端口、接口列表等信息；

同时为了方便管理还需要有一个管理器页面，提供查看服务列表，手动删除服务等功能。



